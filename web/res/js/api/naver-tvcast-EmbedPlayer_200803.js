var EmbedPlayer={init:function(htEnv,htPlayerInfo){this.options={},this.options=this.composePlayerParam(htEnv,htPlayerInfo),this.initLikeIt(),this.initPlayer(),this.initSamsungEventHandler()},composePlayerParam:function(htEnv,htPlayerInfo){var param={};return(htEnv||htPlayerInfo)&&(param.videoId=htPlayerInfo.videoId,param.inKey=htPlayerInfo.inKey,param.rmcSid=htEnv.rmcSid,param.env=htEnv.env,param.autoPlay=htPlayerInfo.autoPlay,param.coverImageUrl=htPlayerInfo.coverImageUrl,param.channelEmblem=htPlayerInfo.channelEmblem,param.fallbackChannelEmblem=htPlayerInfo.fallbackChannelEmblem,param.channelSubscriptionCount=htPlayerInfo.channelSubscriptionCount,param.gladParam=htPlayerInfo.gladParam,param.isShareType=htPlayerInfo.isShareType,param.upgradeElementId=htEnv.playerUpgradeElementId,param.likeItDomain=htEnv.likeItDomain,param.likeItServiceId=htEnv.likeItServiceId,param.likeItContentsId=htEnv.likeItContentsId,param.channelId=htEnv.channelId,param.isSubscribed=htPlayerInfo.isSubscribed,param.apiDomain=htEnv.apiDomain,param.focus=htPlayerInfo.focus,param.smrTrackingData=htPlayerInfo.smrTrackingData,param.clipNo=htPlayerInfo.clipNo),param},initLikeIt:function(){this._likeItApiController=new LikeItApiController({domain:this.options.likeItDomain,serviceId:this.options.likeItServiceId})},initPlayer:function(){BaseWrapPlayer.init(this.options),BaseWrapPlayer.exposeWideButton(!1),BaseWrapPlayer.exposeWatchLaterButton(!1),BaseWrapPlayer.setEndStatus("recommend"),BaseWrapPlayer.setSubscribed(this.options.isSubscribed);const $player=jQuery("#player"),isSmall=$player.width()<=495||$player.height()<=265;isSmall&&(BaseWrapPlayer.exposeHelpButton(!1),BaseWrapPlayer.exposeSubtitleButton(!1),BaseWrapPlayer.exposeSettingButton(!1),BaseWrapPlayer.exposeChannelSubscriptionPanel(!1),BaseWrapPlayer.exposeContentInfoExcludingSubject(),BaseWrapPlayer.smallSize(!0)),this._likeItApiController.getLike(this.options.likeItContentsId,function(res){res&&(BaseWrapPlayer.setLikeButton(res.isReacted),!isSmall&&BaseWrapPlayer.setLikeCount(res.count))}),BaseWrapPlayer.bindLikeButtonComponentEvent("click",jQuery.proxy(function(e){this._likeItApiController.like(this.options.likeItContentsId,BaseWrapPlayer.isLiked(),function(res){401==res.statusCode&&4010==res.errorCode?(BaseWrapPlayer.setLikeButton(!1),confirm("로그인이 필요한 서비스 입니다.\n로그인 하시겠습니까?")&&window.open("https://nid.naver.com/nidlogin.login?url="+encodeURIComponent(window.location.origin+"/embed/login"))):!isSmall&&BaseWrapPlayer.setLikeCount(res.count)})},this)),BaseWrapPlayer.bindChannelSubscriptionButtonComponentEvent("click",jQuery.proxy(function(e){$.ajax({url:this.options.apiDomain+"/api/open/subscription/channel/token",method:"GET",dataType:"jsonp",timeout:2e3,success:jQuery.proxy(function(res){if("failure"==res.header.code)return void("LOGIN"==res.header.text&&confirm("로그인이 필요한 서비스 입니다.\n로그인 하시겠습니까?")&&window.open("https://nid.naver.com/nidlogin.login?url="+encodeURIComponent(window.location.origin+"/embed/login")));if(!BaseWrapPlayer.isSubscribed()||confirm("구독을 취소하시겠습니까?")){const url=BaseWrapPlayer.isSubscribed()?this.options.apiDomain+"/api/open/subscription/channel/unsubscribe":this.options.apiDomain+"/api/open/subscription/channel/subscribe",token=res.body,channelId=this.options.channelId;$.ajax({url:url,dataType:"jsonp",timeout:3e3,data:{token:token,channelId:channelId},success:function(res){if("failure"!=res.header.code&&res.body){if("SUBSCRIBE"==res.body.message)BaseWrapPlayer.setSubscribed(!0);else{if("UNSUBSCRIBE"!=res.body.message)return;BaseWrapPlayer.setSubscribed(!1)}!!res&&!!res.body&&BaseWrapPlayer.setSubscribeCount(res.body.subscriptionCount)}}})}},this)})},this))},initSamsungEventHandler:function(){var self=this;BaseWrapPlayer.bindLoadstartEvent(function(){self.validateSamsungAndroidPostMessage()&&Android.postMesssage("buffering")}),BaseWrapPlayer.bindPlayEvent(function(){self.validateSamsungAndroidPostMessage()&&Android.postMesssage("play")}),BaseWrapPlayer.bindPauseEvent(function(){self.validateSamsungAndroidPostMessage()&&Android.postMesssage("pause")}),BaseWrapPlayer.bindEndedEvent(function(){self.validateSamsungAndroidPostMessage()&&Android.postMesssage("stop")}),window.addEventListener("message",function(event){"play"==event.data?(alert("play"),self.player.play()):"pause"==event.data?(alert("pause"),self.player.pause()):"stop"==event.data&&(alert("stop"),self.player.pause())},!1)},validateSamsungAndroidPostMessage:function(){try{return"undefined"!=typeof Android||"undefined"!=typeof Android.postMessage}catch(e){return!1}},refresh:function(){this._likeItApiController.getLike(this.options.likeItContentsId,function(res){!!res&&BaseWrapPlayer.setLikeButton(res.isReacted)}),$.ajax({url:this.options.apiDomain+"/api/open/subscription/channel/"+this.options.channelId,method:"GET",dataType:"jsonp",timeout:2e3,success:jQuery.proxy(function(res){"failure"!=res.header.code&&!!res&&res.body&&BaseWrapPlayer.setSubscribed("Y"==res.body.subscriptionYn)},this)})}};